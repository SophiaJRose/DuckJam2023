[gd_scene load_steps=66 format=3 uid="uid://dku0133eejq3b"]

[ext_resource type="PackedScene" path="res://Player.tscn" id="1"]
[ext_resource type="Texture2D" uid="uid://b1w16t1bfttux" path="res://Checkboard.png" id="2"]
[ext_resource type="PackedScene" path="res://OrbSpawner.tscn" id="3"]
[ext_resource type="PackedScene" uid="uid://0f2ejrm3x4x2" path="res://GUI.tscn" id="4"]
[ext_resource type="Script" uid="uid://bcxqp1kmuspy0" path="res://World.gd" id="5"]
[ext_resource type="Texture2D" uid="uid://bgslvw58jjaal" path="res://Sky.png" id="6"]

[sub_resource type="BoxShape3D" id="1"]
size = Vector3(56, 8, 100)

[sub_resource type="StandardMaterial3D" id="3"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, 0.25)
uv1_triplanar = true

[sub_resource type="BoxMesh" id="2"]
material = SubResource("3")
size = Vector3(56, 8, 100)

[sub_resource type="BoxShape3D" id="13"]
size = Vector3(32, 8, 100)

[sub_resource type="StandardMaterial3D" id="14"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, -0.25)
uv1_triplanar = true

[sub_resource type="BoxMesh" id="15"]
material = SubResource("14")
size = Vector3(32, 8, 100)

[sub_resource type="BoxShape3D" id="16"]
size = Vector3(8, 2, 24)

[sub_resource type="StandardMaterial3D" id="17"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 1, 0.25)
uv1_triplanar = true

[sub_resource type="BoxMesh" id="18"]
material = SubResource("17")
size = Vector3(8, 2, 24)

[sub_resource type="BoxShape3D" id="19"]
size = Vector3(8, 2, 56)

[sub_resource type="StandardMaterial3D" id="20"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 1, -0.25)
uv1_triplanar = true

[sub_resource type="BoxMesh" id="21"]
material = SubResource("20")
size = Vector3(8, 2, 56)

[sub_resource type="CylinderShape3D" id="4"]
height = 3.0
radius = 6.0

[sub_resource type="StandardMaterial3D" id="5"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(-0.25, 0.25, 0.25)
uv1_triplanar = true
uv1_triplanar_sharpness = 150.0

[sub_resource type="CylinderMesh" id="6"]
material = SubResource("5")
top_radius = 6.0
bottom_radius = 6.0
height = 3.0

[sub_resource type="ConvexPolygonShape3D" id="7"]
points = PackedVector3Array(2, 0, 4, 2, 0, -4, -2, 0, -4, -2, 0, 4, 2, 4, 4, 2, 4, -4)

[sub_resource type="StandardMaterial3D" id="51"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, 0.25)
uv1_triplanar = true

[sub_resource type="PrismMesh" id="9"]
material = SubResource("51")
left_to_right = 1.0
size = Vector3(4, 4, 8)

[sub_resource type="BoxShape3D" id="10"]
size = Vector3(8, 1, 8)

[sub_resource type="StandardMaterial3D" id="11"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, 0.25)
uv1_triplanar = true

[sub_resource type="BoxMesh" id="12"]
material = SubResource("11")
size = Vector3(8, 1, 8)

[sub_resource type="StandardMaterial3D" id="56"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, 0.25)
uv1_triplanar = true

[sub_resource type="BoxMesh" id="57"]
material = SubResource("56")
size = Vector3(8, 1, 8)

[sub_resource type="StandardMaterial3D" id="52"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, 0.25)
uv1_triplanar = true

[sub_resource type="PrismMesh" id="53"]
material = SubResource("52")
left_to_right = 1.0
size = Vector3(4, 4, 8)

[sub_resource type="StandardMaterial3D" id="54"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, 0.25)
uv1_triplanar = true

[sub_resource type="PrismMesh" id="55"]
material = SubResource("54")
left_to_right = 1.0
size = Vector3(4, 4, 8)

[sub_resource type="ConvexPolygonShape3D" id="22"]
points = PackedVector3Array(4, 0, 0, 0, 0, 4, -4, 0, 0, 0, 0, -4, 2.8, 0, 2.8, 2.8, 0, -2.8, -2.8, 0, 2.8, -2.8, 0, -2.8, 4, 8, 0, 0, 8, 4, -4, 8, 0, 0, 8, -4, 2.8, 8, 2.8, 2.8, 8, -2.8, -2.8, 8, 2.8, -2.8, 8, -2.8)

[sub_resource type="StandardMaterial3D" id="23"]
albedo_texture = ExtResource("2")
metallic = 1.0
heightmap_scale = -4.73
uv1_scale = Vector3(0.25, 0.25, 0.25)
uv1_triplanar = true

[sub_resource type="BoxShape3D" id="24"]
size = Vector3(3, 0.4, 6)

[sub_resource type="StandardMaterial3D" id="25"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, 0.25)
uv1_triplanar = true

[sub_resource type="BoxMesh" id="26"]
material = SubResource("25")
size = Vector3(3, 0.4, 6)

[sub_resource type="BoxShape3D" id="29"]
size = Vector3(16, 40, 100)

[sub_resource type="StandardMaterial3D" id="30"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, -0.25)
uv1_triplanar = true

[sub_resource type="BoxMesh" id="31"]
material = SubResource("30")
size = Vector3(16, 40, 100)

[sub_resource type="BoxShape3D" id="32"]
size = Vector3(100, 40, 12)

[sub_resource type="StandardMaterial3D" id="33"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, 0.25)
uv1_triplanar = true

[sub_resource type="BoxMesh" id="34"]
lightmap_size_hint = Vector2i(564, 906)
material = SubResource("33")
size = Vector3(100, 40, 12)

[sub_resource type="BoxShape3D" id="35"]
size = Vector3(16, 40, 100)

[sub_resource type="StandardMaterial3D" id="36"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, 0.25)
uv1_triplanar = true

[sub_resource type="BoxMesh" id="37"]
material = SubResource("36")
size = Vector3(16, 40, 100)

[sub_resource type="BoxShape3D" id="38"]
size = Vector3(100, 40, 20)

[sub_resource type="StandardMaterial3D" id="39"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(-0.25, 0.25, 0.25)
uv1_triplanar = true

[sub_resource type="BoxMesh" id="40"]
material = SubResource("39")
size = Vector3(100, 40, 20)

[sub_resource type="StandardMaterial3D" id="41"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, 0.25)
uv1_triplanar = true
uv1_triplanar_sharpness = 17.7531

[sub_resource type="PrismMesh" id="42"]
material = SubResource("41")
left_to_right = 0.0
size = Vector3(28, 42, 40)

[sub_resource type="CylinderShape3D" id="43"]
height = 1.0
radius = 6.0

[sub_resource type="StandardMaterial3D" id="44"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, 0.25)
uv1_triplanar = true

[sub_resource type="CylinderMesh" id="45"]
material = SubResource("44")
top_radius = 6.0
bottom_radius = 5.0
height = 1.0

[sub_resource type="CylinderShape3D" id="46"]
height = 1.0
radius = 4.0

[sub_resource type="StandardMaterial3D" id="47"]
albedo_texture = ExtResource("2")
metallic = 1.0
uv1_scale = Vector3(0.25, 0.25, 0.25)
uv1_triplanar = true

[sub_resource type="CylinderMesh" id="48"]
material = SubResource("47")
top_radius = 4.0
bottom_radius = 3.0
height = 1.0

[sub_resource type="CylinderShape3D" id="49"]
height = 30.0
radius = 0.1

[sub_resource type="CylinderMesh" id="50"]
top_radius = 0.1
bottom_radius = 0.1
height = 30.0

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_fos0i"]
panorama = ExtResource("6")

[sub_resource type="Sky" id="59"]
sky_material = SubResource("PanoramaSkyMaterial_fos0i")
radiance_size = 2

[sub_resource type="Environment" id="58"]
background_mode = 2
sky = SubResource("59")

[sub_resource type="StandardMaterial3D" id="60"]
transparency = 1
albedo_color = Color(1, 1, 1, 0.25098)

[sub_resource type="SphereMesh" id="61"]
material = SubResource("60")
radius = 0.2
height = 0.4

[node name="Main" type="Node"]

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 2.38419e-07, 1, 0, -1, 2.38419e-07, 0, 50, 0)

[node name="Player" parent="." instance=ExtResource("1")]
collision_layer = 2
collision_mask = 5

[node name="OrbSpawner" parent="." instance=ExtResource("3")]

[node name="GUI" parent="." instance=ExtResource("4")]
anchors_preset = 15

[node name="World" type="Node" parent="."]
script = ExtResource("5")

[node name="Ground" type="StaticBody3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="World/Ground"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18, -3, 2)
shape = SubResource("1")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Ground/CollisionShape3D" groups=["Ground"]]
mesh = SubResource("2")
skeleton = NodePath("../..")

[node name="CollisionShape2" type="CollisionShape3D" parent="World/Ground"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -34, -3, 2)
shape = SubResource("13")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Ground/CollisionShape2" groups=["Ground"]]
mesh = SubResource("15")

[node name="CollisionShape3" type="CollisionShape3D" parent="World/Ground"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14, 0, -38)
shape = SubResource("16")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Ground/CollisionShape3" groups=["Ground"]]
mesh = SubResource("18")

[node name="CollisionShape4" type="CollisionShape3D" parent="World/Ground"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14, 0, 18)
shape = SubResource("19")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Ground/CollisionShape4" groups=["Ground"]]
mesh = SubResource("21")

[node name="Pedestal" type="StaticBody3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 1, 18)

[node name="CollisionShape3D" type="CollisionShape3D" parent="World/Pedestal"]
shape = SubResource("4")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Pedestal/CollisionShape3D" groups=["Pedestal"]]
mesh = SubResource("6")
skeleton = NodePath("../..")

[node name="RampBridge" type="StaticBody3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -13, 0, -17)

[node name="-XRamp" type="CollisionShape3D" parent="World/RampBridge"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7, 0, -1)
shape = SubResource("7")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/RampBridge/-XRamp" groups=["Bridge"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)
mesh = SubResource("9")
skeleton = NodePath("../..")

[node name="+XRamp" type="CollisionShape3D" parent="World/RampBridge"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 5, 0, -1)
shape = SubResource("7")

[node name="MeshInstance2" type="MeshInstance3D" parent="World/RampBridge/+XRamp" groups=["Bridge"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)
mesh = SubResource("9")
skeleton = NodePath("../..")

[node name="Bridge" type="CollisionShape3D" parent="World/RampBridge"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, 3.5, -1)
shape = SubResource("10")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/RampBridge/Bridge" groups=["Bridge"]]
mesh = SubResource("12")

[node name="UnderBridge" type="CollisionShape3D" parent="World/RampBridge"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1, -4.5, -1)
shape = SubResource("10")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/RampBridge/UnderBridge" groups=["Ground"]]
mesh = SubResource("57")

[node name="+ZRamp" type="CollisionShape3D" parent="World/RampBridge"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, 1, 0, 4.37114e-08, -1, -4, 5)
shape = SubResource("7")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/RampBridge/+ZRamp" groups=["Ground"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)
mesh = SubResource("53")

[node name="-ZRamp" type="CollisionShape3D" parent="World/RampBridge"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, -1, 0, 4.37114e-08, -1, -4, -7)
shape = SubResource("7")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/RampBridge/-ZRamp" groups=["Ground"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2, 0)
mesh = SubResource("55")

[node name="Tower" type="StaticBody3D" parent="World"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 16, 0, -12)

[node name="TowerShaft" type="CollisionShape3D" parent="World/Tower"]
shape = SubResource("22")

[node name="CSGPolygon3D" type="CSGPolygon3D" parent="World/Tower/TowerShaft" groups=["Tower"]]
polygon = PackedVector2Array(0, 0, 0, 8, 4, 8, 4, 0)
mode = 1
spin_degrees = 360.0
spin_sides = 8
material = SubResource("23")

[node name="1stStep" type="CollisionShape3D" parent="World/Tower"]
transform = Transform3D(0.92388, 0, 0.382683, 0, 1, 0, -0.382683, 0, 0.92388, 1.591, 1.8, 3.869)
shape = SubResource("24")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Tower/1stStep" groups=["Tower"]]
mesh = SubResource("26")

[node name="3rdStep" type="CollisionShape3D" parent="World/Tower"]
transform = Transform3D(0.92388, 0, 0.382683, 0, 1, 0, -0.382683, 0, 0.92388, -1.628, 5.8, -3.871)
shape = SubResource("24")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Tower/3rdStep" groups=["Tower"]]
mesh = SubResource("26")

[node name="4thStep" type="CollisionShape3D" parent="World/Tower"]
transform = Transform3D(-0.382683, 0, 0.92388, 0, 1, 0, -0.92388, 0, -0.382683, -3.894, 7.79, 1.572)
shape = SubResource("24")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Tower/4thStep" groups=["Tower"]]
mesh = SubResource("26")

[node name="2ndStep" type="CollisionShape3D" parent="World/Tower"]
transform = Transform3D(-0.382683, 0, 0.92388, 0, 1, 0, -0.92388, 0, -0.382683, 3.888, 3.8, -1.573)
shape = SubResource("24")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Tower/2ndStep" groups=["Tower"]]
mesh = SubResource("26")

[node name="Wall" type="StaticBody3D" parent="World"]

[node name="-XWall" type="CollisionShape3D" parent="World/Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -42, 20, -2)
shape = SubResource("29")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Wall/-XWall" groups=["Wall"]]
mesh = SubResource("31")

[node name="-ZWall" type="CollisionShape3D" parent="World/Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2, 20, -44)
shape = SubResource("32")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Wall/-ZWall" groups=["Wall"]]
mesh = SubResource("34")

[node name="+XWall" type="CollisionShape3D" parent="World/Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 42, 20, 2)
shape = SubResource("35")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Wall/+XWall" groups=["Wall"]]
mesh = SubResource("37")

[node name="+ZWall" type="CollisionShape3D" parent="World/Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2, 20, 40)
shape = SubResource("38")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Wall/+ZWall" groups=["Wall"]]
mesh = SubResource("40")

[node name="+Z-XDiagWall" type="CollisionPolygon3D" parent="World/Wall"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, -33, 20, 29)
depth = 40.0
polygon = PackedVector2Array(-1, -1, 27, -1, -1, 41)

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Wall/+Z-XDiagWall" groups=["Wall"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 13, 20, 3.8147e-06)
mesh = SubResource("42")

[node name="WallLedge1" type="CollisionShape3D" parent="World/Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -23, 11.5, 5)
shape = SubResource("43")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Wall/WallLedge1" groups=["Ledge"]]
mesh = SubResource("45")

[node name="WallLedge2" type="CollisionShape3D" parent="World/Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -17, 8.5, 14)
shape = SubResource("46")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Wall/WallLedge2" groups=["Ledge"]]
mesh = SubResource("48")

[node name="WallLedge3" type="CollisionShape3D" parent="World/Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -12, 5.5, 21)
shape = SubResource("46")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Wall/WallLedge3" groups=["Ledge"]]
mesh = SubResource("48")

[node name="Tightrope" type="StaticBody3D" parent="World"]
transform = Transform3D(0.103448, -0.918232, 0.382295, 0.989699, 0.133271, 0.0522933, -0.098966, 0.372947, 0.92256, -4.394, 9.903, -3.635)

[node name="CollisionShape3D" type="CollisionShape3D" parent="World/Tightrope"]
shape = SubResource("49")

[node name="MeshInstance3D" type="MeshInstance3D" parent="World/Tightrope/CollisionShape3D"]
transform = Transform3D(1, -3.72529e-09, 1.49012e-08, 7.45058e-09, 1, 5.96046e-08, 0, 0, 1, 0.00129509, 0.0185061, -0.0692019)
mesh = SubResource("50")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("58")

[node name="OrbMarkers" type="Node" parent="."]

[node name="BridgeUpper" type="MeshInstance3D" parent="OrbMarkers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14, 5.5, -18)
mesh = SubResource("61")

[node name="BridgeLower" type="MeshInstance3D" parent="OrbMarkers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -14, -2.5, -18)
mesh = SubResource("61")

[node name="Pedestal" type="MeshInstance3D" parent="OrbMarkers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6, 4.5, 18)
mesh = SubResource("61")

[node name="Ledge" type="MeshInstance3D" parent="OrbMarkers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -20, 13.5, 4)
mesh = SubResource("61")

[node name="Tower" type="MeshInstance3D" parent="OrbMarkers"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 16, 9.5, -12)
mesh = SubResource("61")

[connection signal="orbCollected" from="Player" to="OrbSpawner" method="_on_Player_orbCollected"]
